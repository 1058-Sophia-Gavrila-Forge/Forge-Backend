trigger:
  - main
  - staging
  - dev
pr:
  - main
  - staging
  - dev

pool:
  vmImage: ubuntu-latest

variables:
  - group: Discord-Webhook-Info

stages:
  - stage: Build_and_Test
    jobs:
      - template: ./gradle-build-test-job-template.yml
        parameters:
          jobName: 'Build_and_Test'
          testPath: '**/TEST-*.xml'
          ccPath: 'build/classes/main/'
      - template: ./discord-job-template.yml
        parameters:
          dependOn: Build_and_Test
          name: 'Team2-P3'
          title: 'Team 2 Project 3 Backend'
          channelID: ${{ variables.discordid }}
          webhookKey: ${{ variables.discordkey }}
